{"ast":null,"code":"var _jsxFileName = \"/home/tulika/projects/Task/my-app-redux/src/Components/UserDetails.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport class UserDetails extends Component {\n  constructor(props) {\n    super(props);\n    console.log(\"user Details: \", this.props);\n    this.state = {\n      postsArray: [],\n      error: \"\",\n      availablePosts: false\n    };\n    this.controller = new AbortController();\n  } // const CancelToken = axios.CancelToken;\n  // const source = CancelToken.source();\n  // this.cancelToken = axios.CancelToken;\n  // this.source = this.cancelToken.source();  \n  //called after receiving new props, also called by state update\n  //then / catch\n\n\n  componentDidUpdate(prevProps) {\n    if (this.props.storeselectedTag !== null && this.props.selectedTag !== undefined && typeof this.props.selectedTag === \"string\" && this.props.selectedTag !== prevProps.selectedTag) {\n      console.log(\"this.props.selectedTag : \", this.props.selectedTag, this.props.selectedTag.length);\n      const url = \"https://dummyapi.io/data/v1/tag/\" + this.props.selectedTag + \"/post?limit=10\"; // const response = await axios.get(url, { \n      //     headers: {'app-id': '62d3c0b515f0055e65f63809'},\n      // });\n      // if(response.status === 200) {\n      //     let dummy = response.data;\n      //     let arr = dummy.data;\n      //     this.setState({\n      //         postsArray: arr,\n      //     })\n      // }\n      //a promise has two states\n      //resolved -- .then()\n      //rejected -- .catch()\n      //(pending -- in process)\n\n      this.setState({\n        error: \"\",\n        postsArray: []\n      });\n      axios.get(url, {\n        headers: {\n          'app-id': '62d3c0b515f0055e65f63809'\n        },\n        // cancelToken: source.token\n        signal: this.controller.signal\n      }).then(successResp => {\n        console.warn(\"successResp : \", successResp);\n        let array = successResp.data.data;\n        let xArray = array.filter(a => {\n          if (a && typeof a === \"object\") {\n            return true;\n          } else {\n            return false;\n          }\n        });\n        console.warn(\"xArray : \", xArray);\n        this.setState({\n          postsArray: xArray,\n          error: xArray.length === 0 ? \"No posts found\" : \"\"\n        });\n      }).catch(failureResp => {\n        console.warn(\"failureResp : \", failureResp);\n        this.setState({\n          error: \"Some Unexpected error occureed. Could not fetch posts.\",\n          postsArray: []\n        });\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    console.warn(\"unmounting user details\"); // source.cancel('Operation canceled by the user.');\n\n    this.controller.abort();\n  }\n\n  render() {\n    let result = null;\n    const {\n      postsArray,\n      error\n    } = this.state;\n    const {\n      selectedTag\n    } = this.props; //selected tag -> passed from parent component\n\n    if (selectedTag) {\n      result = /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"selected_tag\",\n          children: [\"Showing posts for - \", selectedTag]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"err\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"posts_parent\",\n          children: postsArray.map((element, index) => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"post\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"left\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: element.image\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"right\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text\",\n                  children: element.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: element.likes\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 37\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 33\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true);\n    } else {\n      result = \"No tag selected\";\n    }\n\n    return result;\n  }\n\n}\n\nconst mapStoreToProps = _store => {\n  //console.log(\"mapStoreToProps : \", _store);\n  return {\n    store: _store\n  };\n};\n\nconst mapDispatchToProps = _dispatch => {\n  //console.log(\"mapDispatchToProps : \", _dispatch);\n  return {\n    dispatch: _dispatch\n  };\n};\n\nconst ConnectedUserDetails = connect(mapStoreToProps, mapDispatchToProps)(UserDetails);\nexport default ConnectedUserDetails;","map":{"version":3,"names":["React","Component","axios","connect","UserDetails","constructor","props","console","log","state","postsArray","error","availablePosts","controller","AbortController","componentDidUpdate","prevProps","storeselectedTag","selectedTag","undefined","length","url","setState","get","headers","signal","then","successResp","warn","array","data","xArray","filter","a","catch","failureResp","componentWillUnmount","abort","render","result","map","element","index","image","text","likes","mapStoreToProps","_store","store","mapDispatchToProps","_dispatch","dispatch","ConnectedUserDetails"],"sources":["/home/tulika/projects/Task/my-app-redux/src/Components/UserDetails.js"],"sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios';\nimport { connect } from 'react-redux';\n\n\n\nexport class UserDetails extends Component {\n    constructor(props) {\n      super(props)\n        console.log(\"user Details: \",this.props);\n      this.state = {\n        postsArray: [],\n        error: \"\",\n        availablePosts: false\n      };\n\n      this.controller = new AbortController();\n    } \n    // const CancelToken = axios.CancelToken;\n    // const source = CancelToken.source();\n    // this.cancelToken = axios.CancelToken;\n    // this.source = this.cancelToken.source();  \n     \n\n    //called after receiving new props, also called by state update\n    //then / catch\n    componentDidUpdate(prevProps)\n    {\n        if (\n            this.props.storeselectedTag !== null &&\n            this.props.selectedTag !== undefined &&\n            typeof this.props.selectedTag === \"string\" &&\n\n            this.props.selectedTag !== prevProps.selectedTag\n        ) {\n            console.log(\"this.props.selectedTag : \", this.props.selectedTag, this.props.selectedTag.length);\n\n            const url = \"https://dummyapi.io/data/v1/tag/\" + this.props.selectedTag + \"/post?limit=10\";\n\n            // const response = await axios.get(url, { \n            //     headers: {'app-id': '62d3c0b515f0055e65f63809'},\n            // });\n            // if(response.status === 200) {\n            //     let dummy = response.data;\n            //     let arr = dummy.data;\n\n            //     this.setState({\n            //         postsArray: arr,\n            //     })\n            // }\n\n            //a promise has two states\n            //resolved -- .then()\n            //rejected -- .catch()\n            //(pending -- in process)\n\n            this.setState({ error: \"\", postsArray: [] })\n\n            axios.get(url, { \n                headers: {'app-id': '62d3c0b515f0055e65f63809'},\n                // cancelToken: source.token\n                signal: this.controller.signal\n            }).then((successResp) => {\n                console.warn(\"successResp : \", successResp)\n                let array = successResp.data.data;\n                let xArray = array.filter((a) => {\n                    if(a && typeof a === \"object\") {\n                        return true\n                    } else {\n                        return false;\n                    }\n                });        \n\n                console.warn(\"xArray : \", xArray);\n                this.setState({\n                    postsArray: xArray,\n                    error: (xArray.length === 0) ? \"No posts found\" : \"\"\n                });              \n            }).catch((failureResp) => {\n                console.warn(\"failureResp : \", failureResp);\n                this.setState({\n                    error: \"Some Unexpected error occureed. Could not fetch posts.\",\n                    postsArray: []\n                })\n            });\n        }\n    }\n    componentWillUnmount(){\n        console.warn(\"unmounting user details\");\n        // source.cancel('Operation canceled by the user.');\n        this.controller.abort();\n    }\n\n    render() {\n        let result = null;\n        const {postsArray, error} = this.state;\n        const {selectedTag} = this.props; //selected tag -> passed from parent component\n\n        if(selectedTag) {\n            result = (\n                <>\n                    <div className='selected_tag'>Showing posts for - {selectedTag}</div>\n                    <div className='err'>{error}</div>\n\n                    <div className='posts_parent'>\n                    {\n                        postsArray.map((element, index) => {\n                            return (\n                                <div className='post' key={index}>\n                                    {/** left **************/}\n                                    <div className='left'>\n                                        <img src={element.image}/>\n                                    </div>\n\n                                    {/** right **************/}\n                                    <div className='right'>\n                                        <div className='text'>{element.text}</div>\n                                        <div>{element.likes}</div>\n                                    </div>\n                                </div>\n                            )\n                        })\n                    }\n                    </div>\n                </>\n            )\n        }\n        else{\n            result = \"No tag selected\";\n        }\n\n        return (\n            result\n        )\n    }\n}\n\nconst mapStoreToProps = (_store) => {\n    //console.log(\"mapStoreToProps : \", _store);\n  \n    return {\n      store: _store\n    }\n  };\n  \nconst mapDispatchToProps = (_dispatch) => {\n    //console.log(\"mapDispatchToProps : \", _dispatch);\n  \n    return {\n      dispatch: _dispatch\n    }\n  };\n  \n  const ConnectedUserDetails = connect(\n    mapStoreToProps,\n    mapDispatchToProps\n  )(UserDetails);\n  \nexport default ConnectedUserDetails;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}