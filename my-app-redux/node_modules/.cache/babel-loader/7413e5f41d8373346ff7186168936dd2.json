{"ast":null,"code":"var _jsxFileName = \"/home/tulika/projects/Task/my-app-redux/src/Components/UserDetails.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport Filter from './Filter';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport class UserDetails extends Component {\n  constructor(props) {\n    super(props);\n    console.log(\"user Details: \", this.props);\n    this.state = {\n      postsArray: [],\n      error: \"\"\n    };\n    this.controller = new AbortController();\n  } // const CancelToken = axios.CancelToken;\n  // const source = CancelToken.source();\n  // this.cancelToken = axios.CancelToken;\n  // this.source = this.cancelToken.source();  \n  //called after receiving new props, also called by state update\n  //then / catch\n\n\n  componentDidUpdate(prevProps) {\n    const {\n      selectedTag\n    } = this.props.store;\n\n    if (selectedTag !== null && selectedTag !== undefined && typeof selectedTag === \"string\" && selectedTag !== prevProps.store.selectedTag) {\n      console.log(\"this.props.selectedTag : \", selectedTag, selectedTag.length);\n      const url = \"https://dummyapi.io/data/v1/tag/\" + selectedTag + \"/post?limit=10\"; // const response = await axios.get(url, { \n      //     headers: {'app-id': '62d3c0b515f0055e65f63809'},\n      // });\n      // if(response.status === 200) {\n      //     let dummy = response.data;\n      //     let arr = dummy.data;\n      //     this.setState({\n      //         postsArray: arr,\n      //     })\n      // }\n      //a promise has two states\n      //resolved -- .then()\n      //rejected -- .catch()\n      //(pending -- in process)\n\n      this.setState({\n        error: \"\",\n        postsArray: []\n      });\n      axios.get(url, {\n        headers: {\n          'app-id': '62d3c0b515f0055e65f63809'\n        },\n        // cancelToken: source.token\n        signal: this.controller.signal\n      }).then(successResp => {\n        console.warn(\"successResp : \", successResp);\n        let array = successResp.data.data;\n        let xArray = array.filter(a => {\n          if (a && typeof a === \"object\") {\n            return true;\n          } else {\n            return false;\n          }\n        });\n        console.warn(\"xArray : \", xArray);\n        this.setState({\n          postsArray: xArray,\n          error: xArray.length === 0 ? \"No posts found\" : \"\"\n        });\n      }).catch(failureResp => {\n        console.warn(\"failureResp : \", failureResp);\n        this.setState({\n          error: \"Some Unexpected error occureed. Could not fetch posts.\",\n          postsArray: []\n        });\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    console.warn(\"unmounting user details\"); // source.cancel('Operation canceled by the user.');\n\n    this.controller.abort();\n  }\n\n  render() {\n    let result = null;\n    const {\n      postsArray,\n      error\n    } = this.state;\n    const {\n      selectedTag\n    } = this.props.store; //selected tag -> passed from the store\n\n    const {\n      store\n    } = this.props;\n    const {\n      filterState\n    } = store;\n    const {\n      textFilter\n    } = filterState;\n    let filteredArray = postsArray.filter(ele => {\n      ele.text.includes(textFilter);\n    });\n    console.log(\"typed tag is is: \", textFilter);\n    console.log(\"filtered Array is:\", filteredArray); // const result = words.filter(word => word.length > 6);\n\n    if (selectedTag) {\n      result = /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"selected_tag\",\n          children: [\"Showing posts for - \", selectedTag]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"err\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this), postsArray.length > 0 ? /*#__PURE__*/_jsxDEV(Filter, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 29\n        }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"posts_parent\",\n          children: filteredArray.map((element, index) => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"post\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"left\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: element.image\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"right\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text\",\n                  children: element.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: element.likes\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 37\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 33\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true);\n    } else {\n      result = \"No tag selected\";\n    }\n\n    return result;\n  }\n\n}\n\nconst mapStoreToProps = _store => {\n  //console.log(\"mapStoreToProps : \", _store);\n  return {\n    store: _store\n  };\n};\n\nconst mapDispatchToProps = _dispatch => {\n  //console.log(\"mapDispatchToProps : \", _dispatch);\n  return {\n    dispatch: _dispatch\n  };\n};\n\nconst ConnectedUserDetails = connect(mapStoreToProps, mapDispatchToProps)(UserDetails);\nexport default ConnectedUserDetails;","map":{"version":3,"names":["React","Component","axios","connect","Filter","UserDetails","constructor","props","console","log","state","postsArray","error","controller","AbortController","componentDidUpdate","prevProps","selectedTag","store","undefined","length","url","setState","get","headers","signal","then","successResp","warn","array","data","xArray","filter","a","catch","failureResp","componentWillUnmount","abort","render","result","filterState","textFilter","filteredArray","ele","text","includes","map","element","index","image","likes","mapStoreToProps","_store","mapDispatchToProps","_dispatch","dispatch","ConnectedUserDetails"],"sources":["/home/tulika/projects/Task/my-app-redux/src/Components/UserDetails.js"],"sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport Filter from './Filter';\n\n\n\nexport class UserDetails extends Component {\n    constructor(props) {\n      super(props)\n        console.log(\"user Details: \",this.props);\n      this.state = {\n        postsArray: [],\n        error: \"\",\n      };\n\n      this.controller = new AbortController();\n    } \n    // const CancelToken = axios.CancelToken;\n    // const source = CancelToken.source();\n    // this.cancelToken = axios.CancelToken;\n    // this.source = this.cancelToken.source();  \n     \n\n    //called after receiving new props, also called by state update\n    //then / catch\n    componentDidUpdate(prevProps)\n    {\n        const {selectedTag} = this.props.store;\n        if (\n            selectedTag !== null &&\n            selectedTag !== undefined &&\n            typeof selectedTag === \"string\" &&\n\n            selectedTag !== prevProps.store.selectedTag\n        ) {\n            console.log(\"this.props.selectedTag : \", selectedTag, selectedTag.length);\n\n            const url = \"https://dummyapi.io/data/v1/tag/\" + selectedTag + \"/post?limit=10\";\n\n            // const response = await axios.get(url, { \n            //     headers: {'app-id': '62d3c0b515f0055e65f63809'},\n            // });\n            // if(response.status === 200) {\n            //     let dummy = response.data;\n            //     let arr = dummy.data;\n\n            //     this.setState({\n            //         postsArray: arr,\n            //     })\n            // }\n\n            //a promise has two states\n            //resolved -- .then()\n            //rejected -- .catch()\n            //(pending -- in process)\n\n            this.setState({ error: \"\", postsArray: [] })\n\n            axios.get(url, { \n                headers: {'app-id': '62d3c0b515f0055e65f63809'},\n                // cancelToken: source.token\n                signal: this.controller.signal\n            }).then((successResp) => {\n                console.warn(\"successResp : \", successResp)\n                let array = successResp.data.data;\n                let xArray = array.filter((a) => {\n                    if(a && typeof a === \"object\") {\n                        return true\n                    } else {\n                        return false;\n                    }\n                });        \n\n                console.warn(\"xArray : \", xArray);\n                this.setState({\n                    postsArray: xArray,\n                    error: (xArray.length === 0) ? \"No posts found\" : \"\"\n                });              \n            }).catch((failureResp) => {\n                console.warn(\"failureResp : \", failureResp);\n                this.setState({\n                    error: \"Some Unexpected error occureed. Could not fetch posts.\",\n                    postsArray: []\n                })\n            });\n        }\n    }\n    componentWillUnmount(){\n        console.warn(\"unmounting user details\");\n        // source.cancel('Operation canceled by the user.');\n        this.controller.abort();\n    }\n\n    render() {\n        let result = null;\n        const {postsArray, error} = this.state;\n        const {selectedTag} = this.props.store; //selected tag -> passed from the store\n        const {store} = this.props;\n        const {filterState} = store;\n        const {textFilter} = filterState;\n\n        let filteredArray = postsArray.filter((ele) => {\n            ele.text.includes(textFilter)\n        });\n        console.log(\"typed tag is is: \",textFilter);\n        console.log(\"filtered Array is:\",filteredArray);\n        // const result = words.filter(word => word.length > 6);\n\n        if(selectedTag) {\n            result = (\n                <>\n                    <div className='selected_tag'>Showing posts for - {selectedTag}</div>\n                    <div className='err'>{error}</div>\n\n                    {\n                        postsArray.length > 0 ? (\n                            <Filter/>\n                        ) : null\n                    }\n\n                    <div className='posts_parent'>\n                    {\n                        filteredArray.map((element, index) => {\n                            return (\n                                <div className='post' key={index}>\n                                    {/** left **************/}\n                                    <div className='left'>\n                                        <img src={element.image}/>\n                                    </div>\n\n                                    {/** right **************/}\n                                    <div className='right'>\n                                        <div className='text'>{element.text}</div>\n                                        <div>{element.likes}</div>\n                                    </div>\n                                </div>\n                            )\n                        })\n                    }\n                    </div>\n                </>\n            )\n        }\n        else{\n            result = \"No tag selected\";\n        }\n\n        return (\n            result\n        )\n    }\n}\n\nconst mapStoreToProps = (_store) => {\n    //console.log(\"mapStoreToProps : \", _store);\n  \n    return {\n      store: _store\n    }\n  };\n  \nconst mapDispatchToProps = (_dispatch) => {\n    //console.log(\"mapDispatchToProps : \", _dispatch);\n  \n    return {\n      dispatch: _dispatch\n    }\n};\n  \n  const ConnectedUserDetails = connect(\n    mapStoreToProps,\n    mapDispatchToProps\n  )(UserDetails);\n  \nexport default ConnectedUserDetails;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}